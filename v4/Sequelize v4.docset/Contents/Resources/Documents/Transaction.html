<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Transaction</title>
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main" class="nonav">

    <h1 class="page-title">Class: Transaction</h1>

    




<section>

<header>
    <a name="//apple_ref/Class/Transaction" class="dashAnchor"></a>
    
        <h2>Transaction</h2>
        
            <div class="class-description"><p>The transaction object is used to identify a running transaction. It is created by calling <code>Sequelize.transaction()</code>.</p>
<p>To run a query under a transaction, you should pass the transaction in the options object.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        
<a name="//apple_ref/Class/Transaction" class="dashAnchor"></a>


    
    <h2>Constructor</h2>
    

    <h4 class="name" id="Transaction"><span class="type-signature"></span>new Transaction<span class="signature">(sequelize, options)</span><span class="type-signature"></span></h4>

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sequelize</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Sequelize.html">Sequelize</a></span>


            
            </td>

            

            

            <td class="description last"><p>A configured sequelize Instance</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>An object with options</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>autocommit</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Sets the autocommit property of the transaction.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last"><p>Sets the type of the transaction.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>isolationLevel</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last"><p>Sets the isolation level of the transaction.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>deferrable</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Sets the constraints to be deferred or immediately checked.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="transaction.js.html">transaction.js</a>, <a href="transaction.js.html#line13">line 13</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>Sequelize.transaction</li>
        </ul>
    </dd>
    

    
</dl>
















    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<a name="//apple_ref/Property/ISOLATION_LEVELS" class="dashAnchor"></a>

<h4 class="name" id=".ISOLATION_LEVELS"><span class="type-signature">(static) </span>ISOLATION_LEVELS<span class="type-signature"></span></h4>





<div class="description">
    <p>Isolations levels can be set per-transaction by passing <code>options.isolationLevel</code> to <code>sequelize.transaction</code>.
Default to <code>REPEATABLE_READ</code> but you can override the default isolation level by passing <code>options.isolationLevel</code> in <code>new Sequelize</code>.</p>
<p>Pass in the desired level as the first argument:</p>
<pre class="prettyprint source lang-js"><code>return sequelize.transaction({isolationLevel: Sequelize.Transaction.ISOLATION_LEVELS.SERIALIZABLE}, transaction => {

 // your transactions

}).then(result => {
  // transaction has been committed. Do something after the commit if required.
}).catch(err => {
  // do something with the err.
});</code></pre>
</div>







    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>READ_UNCOMMITTED</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>READ_COMMITTED</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>REPEATABLE_READ</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>SERIALIZABLE</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="transaction.js.html">transaction.js</a>, <a href="transaction.js.html#line237">line 237</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<a name="//apple_ref/Property/LOCK" class="dashAnchor"></a>

<h4 class="name" id=".LOCK"><span class="type-signature">(static) </span>LOCK<span class="type-signature"></span></h4>





<div class="description">
    <p>Possible options for row locking. Used in conjunction with <code>find</code> calls:</p>
<pre class="prettyprint source lang-js"><code>t1 // is a transaction
Model.findAll({
  where: ...,
  transaction: t1,
  lock: t1.LOCK...
});</code></pre><p>Postgres also supports specific locks while eager loading by using OF:</p>
<pre class="prettyprint source lang-js"><code>UserModel.findAll({
  where: ...,
  include: [TaskModel, ...],
  transaction: t1,
  lock: {
    level: t1.LOCK...,
    of: UserModel
  }
});</code></pre><p>UserModel will be locked but TaskModel won't!</p>
</div>







    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>UPDATE</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>SHARE</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>KEY_SHARE</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"><p>Postgres 9.3+ only</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>NO_KEY_UPDATE</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"><p>Postgres 9.3+ only</p></td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="transaction.js.html">transaction.js</a>, <a href="transaction.js.html#line279">line 279</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<a name="//apple_ref/Property/TYPES" class="dashAnchor"></a>

<h4 class="name" id=".TYPES"><span class="type-signature">(static) </span>TYPES<span class="type-signature"></span></h4>





<div class="description">
    <p>Types can be set per-transaction by passing <code>options.type</code> to <code>sequelize.transaction</code>.
Default to <code>DEFERRED</code> but you can override the default type by passing <code>options.transactionType</code> in <code>new Sequelize</code>.
Sqlite only.</p>
<p>Pass in the desired level as the first argument:</p>
<pre class="prettyprint source lang-js"><code>return sequelize.transaction({type: Sequelize.Transaction.TYPES.EXCLUSIVE}, transaction => {

 // your transactions

}).then(result => {
  // transaction has been committed. Do something after the commit if required.
}).catch(err => {
  // do something with the err.
});</code></pre>
</div>







    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>DEFERRED</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>IMMEDIATE</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>EXCLUSIVE</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="transaction.js.html">transaction.js</a>, <a href="transaction.js.html#line207">line 207</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<a name="//apple_ref/Property/LOCK" class="dashAnchor"></a>

<h4 class="name" id="LOCK"><span class="type-signature"></span>LOCK<span class="type-signature"></span></h4>











<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="transaction.js.html">transaction.js</a>, <a href="transaction.js.html#line291">line 291</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="Transaction.html#.LOCK">Transaction.LOCK</a></li>
        </ul>
    </dd>
    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            
<a name="//apple_ref/Function/commit" class="dashAnchor"></a>


    

    <h4 class="name" id="commit"><span class="type-signature"></span>commit<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    <p>Commit the transaction</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="transaction.js.html">transaction.js</a>, <a href="transaction.js.html#line56">line 56</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>


    



        
            
<a name="//apple_ref/Function/rollback" class="dashAnchor"></a>


    

    <h4 class="name" id="rollback"><span class="type-signature"></span>rollback<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    <p>Rollback (abort) the transaction</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="transaction.js.html">transaction.js</a>, <a href="transaction.js.html#line82">line 82</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>


    



        
    

    

    
</article>

</section>




</div>



<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Feb 07 2018 16:33:50 GMT-0700 (MST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>